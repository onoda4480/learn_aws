# メッセージング（試験問題）

## SNS FIFO + SQS FIFO パターン

### シナリオ
- イベント発生 → 複数システムに配信
- **順序を守る**必要あり
- **重複を防ぐ**必要あり

### 正解の構成

```
イベント発生
    │
    ▼
SNS FIFO トピック（重複排除ID付きで発行）
    │
    ├─→ SQS FIFO キュー → システムA
    ├─→ SQS FIFO キュー → システムB
    └─→ SQS FIFO キュー → システムC
```

### なぜこの構成か

| 要件 | 解決策 |
|------|--------|
| 複数システムに配信 | SNS（Pub/Sub） |
| 順序を守る | FIFO |
| 重複を防ぐ | 重複排除ID（メッセージ重複排除ID） |

### Standard vs FIFO

| 項目 | Standard | FIFO |
|-----|----------|------|
| 順序 | 保証なし | **保証あり** |
| 重複 | あり得る | **排除可能** |
| スループット | 高い | 制限あり |

## 試験キーワード

```
「順序を守る」「重複を防ぐ」→ FIFO
「複数システムに配信」→ SNS
「メッセージの消失を防ぐ」→ SQS を挟む
```
