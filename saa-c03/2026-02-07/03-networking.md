# ネットワーク

## ロードバランサーの比較

| 項目 | ALB | NLB | CLB |
|------|-----|-----|-----|
| 正式名 | Application LB | Network LB | Classic LB |
| レイヤー | L7（アプリ層） | L4（トランスポート層） | L4 / L7 |
| プロトコル | HTTP, HTTPS | TCP, UDP, TLS | HTTP, HTTPS, TCP |
| 状態 | 現行 | 現行 | **旧世代（非推奨）** |

### 特徴

```
ALB = Webアプリ向け（URLパスやヘッダーで振り分け）
NLB = 超高速・大量接続向け（IPアドレスで振り分け）
CLB = 古い、新規では使わない
```

### 選び方

```
Webアプリ（HTTP/HTTPS）      → ALB
超高速・TCP/UDP・固定IP必要  → NLB
```

---

## VPC エンドポイント

VPC内からAWSサービスに**インターネットを経由せず**プライベート接続する機能

### 2種類のエンドポイント

| 種類 | ゲートウェイ型 | インターフェース型 |
|------|---------------|-------------------|
| 対象サービス | **S3, DynamoDB のみ** | その他多数 |
| 料金 | **無料** | 時間+データ転送課金 |
| 仕組み | ルートテーブルに追加 | ENI を作成 |

### 試験ポイント

```
「S3/DynamoDBにプライベート接続」「無料」→ ゲートウェイ型
「その他AWSサービスにプライベート接続」→ インターフェース型（PrivateLink）
```

---

## NAT インスタンス vs NAT ゲートウェイ

| 項目 | NATインスタンス | NATゲートウェイ |
|------|----------------|-----------------|
| 管理 | **自分で管理** | **AWSが管理** |
| 帯域 | インスタンスサイズ依存 | **最大100Gbps（自動スケール）** |
| 可用性 | 自分で冗長化 | **AZ内で冗長化済み** |
| 運用負荷 | 高い | **低い** |

### 試験ポイント

```
「NATインスタンスの限界」「運用負荷を下げたい」→ NATゲートウェイに移行
「高可用性」→ 異なるAZに配置
```

---

## TCP/IP

### TCP（Transmission Control Protocol）

データを**確実に届ける**ための通信ルール

| 項目 | TCP | UDP |
|------|-----|-----|
| 信頼性 | 高い（確認あり） | 低い（確認なし） |
| 速度 | やや遅い | 速い |
| 用途 | Web、メール | 動画配信、ゲーム |

### IP（Internet Protocol）

```
IP       = 届ける仕組み（郵便システム）
IPアドレス = 住所（場所を示す番号）
```
