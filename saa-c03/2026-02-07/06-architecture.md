# アーキテクチャ

## デカップリング（Decoupling）

システムの各コンポーネントを**疎結合**にすること

### イメージ

```
密結合：
  システムA → システムB（Aが止まるとBも止まる）

疎結合（デカップリング）：
  システムA → [キュー] → システムB（独立して動作）
```

### AWSでのデカップリング手段

| サービス | 役割 |
|---------|------|
| SQS | メッセージキュー |
| SNS | メッセージ配信 |
| EventBridge | イベント駆動連携 |

### メリット

- 障害の分離
- スケーラビリティ
- 保守性

---

## ディザスタリカバリ（DR）戦略

| 戦略 | コスト | 復旧時間 | 概要 |
|------|--------|----------|------|
| Backup & Restore | 最安 | 遅い（時間〜日） | バックアップから復元 |
| Pilot Light | 安い | やや遅い（分〜時間） | 最小構成を常時起動 |
| Warm Standby | 高い | 速い（分） | 縮小版を常時稼働 |
| Multi-Site Active | 最高 | 即時（秒） | 本番同等を常時稼働 |

### イメージ

```
Backup & Restore：バックアップから全部構築
Pilot Light：DBだけ稼働、障害時にサーバー起動
Warm Standby：小さめ環境を稼働、スケールアップ
Multi-Site Active：2つの本番環境が両方稼働
```

### RTO / RPO

| 指標 | 意味 |
|------|------|
| RTO | 復旧までの許容時間 |
| RPO | 失っていいデータの量（時間） |

---

## Route 53 エイリアスレコード

**AWSリソースを直接指定**できるDNSレコード（Route 53独自）

### CNAMEとの違い

| 項目 | エイリアス | CNAME |
|------|-----------|-------|
| Zone Apex | **使える** | 使えない |
| 料金 | **無料** | クエリ課金あり |
| 対象 | AWSリソースのみ | どこでもOK |

### エイリアス対応リソース

- ELB（ALB/NLB/CLB）
- CloudFront
- S3（静的Webホスティング）
- API Gateway

### 試験ポイント

```
「ルートドメイン（Zone Apex）でAWSリソースを指定」→ エイリアスレコード
```
