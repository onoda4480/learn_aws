# ストレージ

## S3 Glacier の取り出し速度

| 項目 | Instant Retrieval | Flexible Retrieval | Deep Archive |
|------|-------------------|-------------------|--------------|
| 取り出し時間 | **ミリ秒** | **分〜時間** | **12時間以上** |
| アクセス頻度 | 四半期に1回程度 | 年に1〜2回程度 | ほぼアクセスなし |
| 料金（保存） | やや高い | 安い | 最安 |

### Flexible Retrieval の3つのオプション

| オプション | 時間 | コスト |
|-----------|------|--------|
| 迅速（Expedited） | 1〜5分 | 高い |
| 標準（Standard） | 3〜5時間 | 中間 |
| 大容量（Bulk） | 5〜12時間 | 最安 |

### 試験ポイント

```
「即座にアクセス」「ミリ秒」→ Instant Retrieval
「数時間待てる」「柔軟な取り出し」→ Flexible Retrieval
「12時間以上」「最低コスト」→ Deep Archive
```

---

## AWS Storage Gateway - ボリュームゲートウェイ

### 2つのモードの違い

| 項目 | ストアドボリューム | キャッシュボリューム |
|------|-------------------|---------------------|
| データ保存場所 | **ローカル（オンプレ）** | S3（クラウド） |
| ローカルの役割 | 全データ保存 | キャッシュのみ |
| アクセス速度 | **速い（ローカル）** | よく使うデータは速い |

### ストアドボリュームの仕組み

```
オンプレミス                          AWS
┌─────────────────┐              ┌─────────┐
│ ローカル ───────────────────→  │   S3    │
│ ストレージ      │   非同期     │（バック │
│（全データ保存） │   バックアップ│ アップ）│
└─────────────────┘              └─────────┘
```

### 試験ポイント

```
「ローカルに全データ保存」「低レイテンシ」→ ストアドボリューム
「S3に全データ保存」「ローカルはキャッシュのみ」→ キャッシュボリューム
```

---

## SMB ファイル共有

Windowsで標準的に使われるファイル共有の仕組み

### NFS との違い

| 項目 | SMB | NFS |
|------|-----|-----|
| 主な用途 | **Windows** | **Linux** |
| 認証 | Active Directory連携 | UID/GID ベース |

### AWSでの対応サービス

| サービス | プロトコル |
|---------|-----------|
| FSx for Windows | SMB |
| EFS | NFS |
| Storage Gateway (File) | SMB / NFS |

### 試験ポイント

```
「Windowsファイル共有」「SMB」→ FSx for Windows
「Linuxファイル共有」「NFS」→ EFS
```
